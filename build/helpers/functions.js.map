{"version":3,"sources":["../../src/helpers/functions.js"],"names":["removePlayer","position","gameId","models","Game","findOne","_id","game","UserInputError","numPlayers","players","filter","player","save","Player","findOneAndRemove"],"mappings":";;;;;;;AAAA;;;;;;AAEA,IAAMA,YAAY;AAAA,qEAAG,iBAAOC,QAAP,EAAiBC,MAAjB,EAAyBC,MAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACEA,MAAM,CAACC,IAAP,CAAYC,OAAZ,CAAoB;AAACC,cAAAA,GAAG,EAAEJ;AAAN,aAApB,CADF;;AAAA;AACXK,YAAAA,IADW;;AAAA,gBAEZA,IAFY;AAAA;AAAA;AAAA;;AAAA,kBAGP,IAAIC,mCAAJ,CAAmB,oBAAnB,CAHO;;AAAA;AAMjBD,YAAAA,IAAI,CAACE,UAAL,IAAmB,CAAnB;AACAF,YAAAA,IAAI,CAACG,OAAL,CAAaC,MAAb,CAAoB,UAAAC,MAAM,EAAI;AAC1BA,cAAAA,MAAM,CAACX,QAAP,IAAmBA,QAAnB;AACH,aAFD;AAPiB;AAAA;AAAA,mBAYPM,IAAI,CAACM,IAAL,EAZO;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA,kBAcP,IAAIL,mCAAJ,CAAmB,0BAAnB,CAdO;;AAAA;AAAA;AAAA;AAAA,mBAkBPL,MAAM,CAACW,MAAP,CAAcC,gBAAd,CAA+B;AAACd,cAAAA,QAAQ,EAAEA,QAAX;AAAqBM,cAAAA,IAAI,EAAEL;AAA3B,aAA/B,CAlBO;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA,kBAoBP,IAAIM,mCAAJ,CAAmB,yBAAnB,CApBO;;AAAA;AAAA,6CAuBV,IAvBU;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAZR,YAAY;AAAA;AAAA;AAAA,GAAlB","sourcesContent":["import { UserInputError } from 'apollo-server-express';\n\nconst removePlayer = async (position, gameId, models) =>  {\n    const game = await models.Game.findOne({_id: gameId});\n    if (!game) {\n        throw new UserInputError('Incorrect game id.');\n    }\n\n    game.numPlayers -= 1;\n    game.players.filter(player => {\n        player.position != position;\n    });\n\n    try {\n        await game.save();\n    } catch(err) {\n        throw new UserInputError('Failed to update models.');\n    }\n\n    try {\n        await models.Player.findOneAndRemove({position: position, game: gameId});\n    } catch(err) {\n        throw new UserInputError('Failed to delete player');\n    }\n    \n    return true;\n};\n\nexport { removePlayer };"],"file":"functions.js"}